<!doctype html>
<html>

<head></head>

<body>
    <h1>Ad Server Client Test</h1>

    <div class="as-skyscraper"></div>
    <div class="as-full"></div>
    <div class="as-sidebar"></div>
</body>

<script>
    var sidebar = document.getElementsByClassName('as-sidebar');
    var full = document.getElementsByClassName('as-full');
    var skyscraper = document.getElementsByClassName('as-skyscraper');

    fetch('/inserts?full=' + full.length + '&sidebar=' + sidebar.length + '&skyscraper=' + skyscraper.length)
        .then(data => data.json())
        .then(data => {

            // simulate latency
            setTimeout(() => {
                for (var i = 0; i < full.length; i++) {
                    if (data.full[i])
                        full[i].innerHTML = data.full[i]
                }

                for (var i = 0; i < sidebar.length; i++) {
                    if (data.sidebar[i]) {
                        sidebar[i].innerHTML = data.sidebar[i]
                    }
                }

                for (var i = 0; i < skyscraper.length; i++) {
                    if (data.skyscraper[i]) {
                        skyscraper[i].innerHTML = data.skyscraper[i]
                    }
                }
            }, 1000)
        })
</script>

</html>